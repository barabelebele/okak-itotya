import asyncio
import random
from aiogram import Bot, Dispatcher, types
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.filters import Command
from aiogram.enums import ParseMode
from aiogram.client.default import DefaultBotProperties

# ========== –¢–û–ö–ï–ù ==========
API_TOKEN = '8259801608:AAEy-j1LevJ9qYfrItnmcCAjIyrEcg0Eycg'

# ========== –í–û–ü–†–û–°–´ ==========
QUESTIONS = [
    "–ö–∞–∫ –¥–µ–ª–∞?",
    "–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?",
    "–ß–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?",
    "–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?",
    "–ß—Ç–æ –¥—É–º–∞–µ—à—å?",
    "–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?",
    "–†–∞—Å—Å–∫–∞–∂–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å",
    "–ü–æ–¥–µ–ª–∏—Å—å –Ω–æ–≤–æ—Å—Ç—è–º–∏",
    "–ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?",
    "–ß—Ç–æ —Å–º–µ—à–Ω–æ–≥–æ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ?",
    "–ß—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ —Å–ª—É—á–∏–ª–æ—Å—å?",
    "–ß—Ç–æ —Ç–µ–±—è —Å–µ–≥–æ–¥–Ω—è —É–¥–∏–≤–∏–ª–æ?",
    "–ß—Ç–æ —Ç–µ–±—è —Å–µ–≥–æ–¥–Ω—è –ø–æ—Ä–∞–¥–æ–≤–∞–ª–æ?",
    "–ß—Ç–æ —Ç–µ–±—è —Å–µ–≥–æ–¥–Ω—è –∑–∞—Å—Ç–∞–≤–∏–ª–æ —É–ª—ã–±–Ω—É—Ç—å—Å—è?",
    "–ö–∞–∫–∏–µ –ø–ª–∞–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è?",
    "–ö–∞–∫–∏–µ –ø–ª–∞–Ω—ã –Ω–∞ –∑–∞–≤—Ç—Ä–∞?",
    "–ö–∞–∫–∏–µ –ø–ª–∞–Ω—ã –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ?",
    "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?",
    "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —Å—ä–µ—Å—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?",
    "–ö—É–¥–∞ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª –ø–æ–π—Ç–∏?",
    "–° –∫–µ–º –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —É–≤–∏–¥–µ—Ç—å—Å—è?",
    "–ß—Ç–æ —Å–º–æ—Ç—Ä–∏—à—å —Å–µ–π—á–∞—Å?",
    "–ß—Ç–æ —á–∏—Ç–∞–µ—à—å —Å–µ–π—á–∞—Å?",
    "–ß—Ç–æ —Å–ª—É—à–∞–µ—à—å —Å–µ–π—á–∞—Å?",
    "–ß—Ç–æ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è?",
    "–ß—Ç–æ —Ç–µ–±—è –±–µ—Å–∏—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è —Ä–∞–¥—É–µ—Ç?",
    "–û —á—ë–º –º–µ—á—Ç–∞–µ—à—å?",
    "–ß–µ–≥–æ —Ö–æ—á–µ—à—å?",
    "–ß–µ–≥–æ –±–æ–∏—à—å—Å—è?",
    "–ß—Ç–æ —Ü–µ–Ω–∏—à—å –≤ –ª—é–¥—è—Ö?",
    "–ß—Ç–æ –Ω–µ –ª—é–±–∏—à—å –≤ –ª—é–¥—è—Ö?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –≤–∞–∂–Ω–æ?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è —Å—á–∞—Å—Ç—å–µ?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –ª—é–±–æ–≤—å?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –¥—Ä—É–∂–±–∞?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è —É—Å–ø–µ—Ö?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –¥–æ–º?",
    "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è —Å–µ–º—å—è?",
    "–ß—Ç–æ —Ç—ã –ª—é–±–∏—à—å –¥–µ–ª–∞—Ç—å –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è?",
    "–ö–∞–∫–æ–µ —É —Ç–µ–±—è —Ö–æ–±–±–∏?",
    "–ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π —Ñ–∏–ª—å–º?",
    "–ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π —Å–µ—Ä–∏–∞–ª?",
    "–ö–∞–∫–∞—è —Ç–≤–æ—è –ª—é–±–∏–º–∞—è –º—É–∑—ã–∫–∞?",
    "–ö–∞–∫–∞—è —Ç–≤–æ—è –ª—é–±–∏–º–∞—è –∫–Ω–∏–≥–∞?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ—ë –ª—é–±–∏–º–æ–µ –±–ª—é–¥–æ?",
    "–ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π –Ω–∞–ø–∏—Ç–æ–∫?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ—ë –ª—é–±–∏–º–æ–µ –º–µ—Å—Ç–æ?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ—ë –ª—é–±–∏–º–æ–µ –≤—Ä–µ–º—è –≥–æ–¥–∞?",
    "–ì–¥–µ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–±—ã–≤–∞—Ç—å?",
    "–ß—Ç–æ —Ö–æ—á–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å?",
    "–ß–µ–º—É —Ö–æ—á–µ—à—å –Ω–∞—É—á–∏—Ç—å—Å—è?",
    "–ß—Ç–æ —Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏?",
    "–ß—Ç–æ —Ö–æ—á–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å?",
    "–ö–µ–º —Ç—ã –≤–æ—Å—Ö–∏—â–∞–µ—à—å—Å—è?",
    "–ö—Ç–æ —Ç–µ–±—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç?",
    "–ö—Ç–æ —Ç–≤–æ–π –ª—é–±–∏–º—ã–π —á–µ–ª–æ–≤–µ–∫?",
    "–° –∫–µ–º —Ç–µ–±–µ —Ö–æ—Ä–æ—à–æ?",
    "–° –∫–µ–º —Ç–µ–±–µ –ª–µ–≥–∫–æ?",
    "–ö–æ–≥–æ —Ç–µ–±–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è —Å–µ–π—á–∞—Å –≤–æ–ª–Ω—É–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è —Å–µ–π—á–∞—Å —Ç—Ä–µ–≤–æ–∂–∏—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è —Å–µ–π—á–∞—Å —Ä–∞–¥—É–µ—Ç?",
    "–ß—Ç–æ —Ç–µ–±—è —Å–µ–π—á–∞—Å —É–¥–∏–≤–ª—è–µ—Ç?",
    "–ß—Ç–æ —Ç—ã —Å–µ–π—á–∞—Å —á—É–≤—Å—Ç–≤—É–µ—à—å?",
    "–û —á—ë–º —Ç—ã —Å–µ–π—á–∞—Å –¥—É–º–∞–µ—à—å?",
    "–ß—Ç–æ —Ç—ã —Å–µ–π—á–∞—Å —Ö–æ—á–µ—à—å?",
    "–ß—Ç–æ —Ç–µ–±–µ —Å–µ–π—á–∞—Å –Ω—É–∂–Ω–æ?",
    "–ö–∞–∫ –ø—Ä–æ—à—ë–ª —Ç–≤–æ–π –¥–µ–Ω—å?",
    "–ö–∞–∫ –ø—Ä–æ—à–ª–∞ —Ç–≤–æ—è –Ω–µ–¥–µ–ª—è?",
    "–ß—Ç–æ –±—ã–ª–æ —Å–∞–º—ã–º —è—Ä–∫–∏–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è?",
    "–ß—Ç–æ –±—ã–ª–æ —Å–∞–º—ã–º —Å–º–µ—à–Ω—ã–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è?",
    "–ß—Ç–æ –±—ã–ª–æ —Å–∞–º—ã–º –ø—Ä–∏—è—Ç–Ω—ã–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è?",
    "–ß—Ç–æ —Ç–µ–±–µ –∑–∞–ø–æ–º–Ω–∏–ª–æ—Å—å?",
    "–ß—Ç–æ —Ç–µ–±—è —É–¥–∏–≤–∏–ª–æ?",
    "–ß—Ç–æ —Ç–µ–±—è –ø–æ—Ä–∞–¥–æ–≤–∞–ª–æ?",
    "–ß—Ç–æ —Ç–µ–±—è –æ–≥–æ—Ä—á–∏–ª–æ?",
    "–ß—Ç–æ —Ç–µ–±—è —Ä–∞–∑–æ–∑–ª–∏–ª–æ?",
    "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —Å–∫–∞–∑–∞—Ç—å?",
    "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —Å–ø—Ä–æ—Å–∏—Ç—å?",
    "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª –æ–±—Å—É–¥–∏—Ç—å?",
    "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª —É–∑–Ω–∞—Ç—å?",
    "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª –ø–æ–Ω—è—Ç—å?",
    "–ö–æ—Ñ–µ –∏–ª–∏ —á–∞–π?",
    "–°–ª–∞–¥–∫–æ–µ –∏–ª–∏ —Å–æ–ª—ë–Ω–æ–µ?",
    "–ú—è—Å–æ –∏–ª–∏ —Ä—ã–±–∞?",
    "–ü–∏—Ü—Ü–∞ –∏–ª–∏ —Å—É—à–∏?",
    "–õ–µ—Ç–æ –∏–ª–∏ –∑–∏–º–∞?",
    "–ú–æ—Ä–µ –∏–ª–∏ –≥–æ—Ä—ã?",
    "–ì–æ—Ä–æ–¥ –∏–ª–∏ –ø—Ä–∏—Ä–æ–¥–∞?",
    "–î–æ–º –∏–ª–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è?",
    "–£—Ç—Ä–æ –∏–ª–∏ –Ω–æ—á—å?",
    "–ë—É–¥–Ω–∏ –∏–ª–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ?",
    "–†–∞–±–æ—Ç–∞ –∏–ª–∏ –æ—Ç–¥—ã—Ö?",
    "–ö–æ–º–ø–∞–Ω–∏—è –∏–ª–∏ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ?",
    "–ê–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö –∏–ª–∏ –ª–µ–Ω–∏–≤—ã–π?",
    "–§–∏–ª—å–º –∏–ª–∏ —Å–µ—Ä–∏–∞–ª?",
    "–ö–Ω–∏–≥–∞ –∏–ª–∏ –∏–≥—Ä–∞?",
    "–ú—É–∑—ã–∫–∞ –∏–ª–∏ —Ç–∏—à–∏–Ω–∞?",
]

print(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: {len(QUESTIONS)} –≤–æ–ø—Ä–æ—Å–æ–≤")

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
bot = Bot(token=API_TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))
dp = Dispatcher()

# –°–±—Ä–æ—Å –≤–µ–±—Ö—É–∫–∞
async def reset_webhook():
    await bot.delete_webhook(drop_pending_updates=True)
    print("‚úÖ –í–µ–±—Ö—É–∫ —Å–±—Ä–æ—à–µ–Ω")

# ========== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê ==========
@dp.message(lambda message: message.text and message.text.lower() == "–≤–æ–ø—Ä–æ—Å")
@dp.message(Command("ask"))
async def send_random_question(message: types.Message):
    """–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤—ã–¥–∞—ë—Ç —Å–ª—É—á–∞–π–Ω—ã–π –≤–æ–ø—Ä–æ—Å"""
    question = random.choice(QUESTIONS)
    
    # –ü—Ä–æ—Å—Ç—ã–µ –∫–Ω–æ–ø–∫–∏
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text="üëç", callback_data="like"),
            InlineKeyboardButton(text="üëé", callback_data="dislike")
        ]
    ])
    
    await message.reply(f"‚ùì {question}", reply_markup=keyboard)

@dp.message(Command("start"))
async def start_command(message: types.Message):
    await message.reply(
        "üëã **–ü—Ä–∏–≤–µ—Ç!**\n\n"
        "–ù–∞–ø–∏—à–∏ **¬´–≤–æ–ø—Ä–æ—Å¬ª** ‚Äî –∏ —è —Å—Ä–∞–∑—É –∑–∞–¥–∞–º –µ–≥–æ —Ç–µ–±–µ! ü§î\n\n"
        f"üìä –í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤: {len(QUESTIONS)}"
    )

@dp.callback_query()
async def handle_callback(callback: types.CallbackQuery):
    if callback.data == "like":
        await callback.answer("üëç", show_alert=False)
    elif callback.data == "dislike":
        await callback.answer("üëé", show_alert=False)
    
    await callback.message.edit_reply_markup(reply_markup=None)

# ========== –ó–ê–ü–£–°–ö ==========
async def main():
    await reset_webhook()
    print("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    print("üì® –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–ª–æ–≤–æ ¬´–≤–æ–ø—Ä–æ—Å¬ª –∏ –∫–æ–º–∞–Ω–¥—É /ask")
    print(f"üìä –í–æ–ø—Ä–æ—Å–æ–≤ –≤ –±–∞–∑–µ: {len(QUESTIONS)}")
    await dp.start_polling(bot)

if __name__ == '__main__':
    asyncio.run(main())
